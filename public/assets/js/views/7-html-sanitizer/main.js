import formatHtmlCode from"../../../js/modules/formatHtmlCode.js";import sanitizeHtml from"../../../js/modules/sanitizeHtml.js";import capitalize from"../../../js/modules/capitalize.js";import copyToClipboard from"../../../js/modules/copyToClipboard.js";const outputTitle=document.getElementById("outputTitle"),selectMode=document.getElementById("selectMode"),copyBtn=document.getElementById("copyBtn"),resetBtn=document.getElementById("resetBtn"),demoBtn=document.getElementById("demoBtn"),textAreaInput=document.getElementById("textAreaInput"),textAreaInputEditor=CodeMirror.fromTextArea(textAreaInput,{mode:"htmlmixed",theme:"dracula",lineNumbers:!0,lineWrapping:!0,styleActiveLine:{nonEmpty:!0}}),textAreaOutput=document.getElementById("textAreaOutput"),textAreaOutputEditor=CodeMirror.fromTextArea(textAreaOutput,{mode:"htmlmixed",theme:"dracula",lineNumbers:!0,lineWrapping:!0,readOnly:!0,styleActiveLine:{nonEmpty:!0}}),demo='<img src=\'javascript:while(1){}\'>\n<a href=data:,evilnastystuff>clickme</a>\n<a href="#some-code-here" id="location">invisible\n<div onclick=alert(0)><form onsubmit=alert(1)><input onfocus=alert(2) name=parentNode>123</form></div>';textAreaInputEditor.on("change",(()=>sanitizeHtml(textAreaInputEditor,textAreaOutputEditor))),selectMode.addEventListener("change",(t=>{outputTitle.innerText="Output: "+capitalize(t.currentTarget.value),formatHtmlCode(t.currentTarget,textAreaInputEditor,textAreaOutputEditor,DOMPurify)})),demoBtn.addEventListener("click",(t=>{t.preventDefault(),textAreaInputEditor.setValue(demo)})),copyBtn.addEventListener("click",(t=>{t.preventDefault(),copyToClipboard(t,textAreaOutputEditor.getValue())}),!1),resetBtn.addEventListener("click",(t=>{t.preventDefault(),textAreaInputEditor.setValue("")}));